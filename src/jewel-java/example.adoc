== In Action

image::images/Binary_tree_v2.svg[height=400px,width=600px,background=white]

=== Base

Source Code: https://github.com/MBoegers/TreeExperiments[github.com/MBoegers/TreeExperiments]

[source,java]
----
sealed interface Tree { Tree delete(int value); }
record SubTree(Tree left, int value, Tree right)
    implements Tree {}
record EmptyTree() implements Tree {}
----

=== Java OO

[source,java]
----
// SubTree#delete(int)
if (value == v) {
  if (left instanceof EmptyTree
        && right instanceof EmptyTree) return new EmptyTree();
  else if (left instanceof EmptyTree
        && right instanceof SubTree) return right;
  else if (left instanceof SubTree
        && right instanceof EmptyTree) return left;
  else if (left instanceof SubTree l
        && right instanceof SubTree)
    return l.insertInRightTree(right);
  else throw new IllegalStateException(
            "This should not be possible");
} else //...
----

=== Java FP

[source,java]
----
// TreeOperations#delete(int)
return switch (tree) {
  case EmptyTree e, null -> e;
  case SubTree(Tree l,Integer v,Tree r)
    when contains(l, value) -> delete(l, value);
  case SubTree(Tree l,Integer v,Tree r)
    when contains(r, value) -> delete(r, value);
  case SubTree(EmptyTree l,Integer v,EmptyTree r)
    when (v == value) -> new EmptyTree();
  case SubTree(SubTree l,Integer v,EmptyTree r)
    when (v == value) -> l;
  case SubTree(EmptyTree l,Integer v,SubTree r)
    when (v == value) -> r;
  case SubTree(SubTree l,Integer v,SubTree r)
    when (v == value) -> insertSubTree(r, l);
  case SubTree subTree -> subTree;
};
----